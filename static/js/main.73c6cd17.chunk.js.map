{"version":3,"sources":["logo.svg","../node_modules/gun sync","createTestData.js","gun.js","context.js","hooks/useGun.js","hooks/useGunState.js","utils/gunEventListenerWrapper.js","components/Sidebar.js","App.js","utils/uuid-v4.js","components/Main.js","serviceWorker.js","index.js"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","gun","a","tags","get","tag1","put","type","name","tag2","tag3","set","webTags","wt1","domain","url","wt2","wt3","cards","c1","frontText","backText","due","c2","all","createTestData","useTestData","Gun","localStorage","clear","createGun","GunContext","React","createContext","GunProvider","value","rest","Provider","useGun","context","useContext","undefined","subscribeSyncObjectHelper","syncObj","updateState","unsubscribers","Object","forEach","k","v","push","key","eventListener","events","msg","event","length","off","gunEventListenerWrapper","wrappedListener","unsubscriber","on","syncField","includes","trimmedKey","slice","nodeKeys","childSyncObj","map","once","node","_key","_msg","eve","nodeId","_","nodeSyncObj","cloneDeep","syncSet","_k","renameKeys","state","args","replaceKeysDeep","obj","keysMap","transform","result","isObject","reduce","useGunState","gunQuery","useState","setState","useEffect","JSON","parse","replace","m","convertGunQueryToObj","subscribeSyncObject","u","values","SidebarWrapper","props","ListGroup","tag","index","Item","active","selectedTags","action","onClick","setSelectedTags","assign","webTag","uuid","Math","random","toString","Main","filterTags","entries","filter","console","log","sortBy","card","allTags","t","concat","every","o","delayDueDate","delayTime","cardId","time","numDays","formValues","setFormValues","Form","onSubmit","preventDefault","newCard","Date","now","createNewCard","Group","controlId","Label","Control","onChange","target","Button","variant","style","borderColor","borderWidth","horizontal","App","isLoadingComplete","setLoadingComplete","window","loadResourcesAndDataAsync","split","minSize","defaultSize","allowResize","Boolean","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.73c6cd17.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 106;","\n\nasync function createTestData(gun) {\n\n  // Create tags\n  \n  const tags = gun\n  .get('set::tags')\n  // .put({\n  //   type: 'set'\n  // })\n\n  const tag1 = gun\n    .get('tag::tag1')\n    .put({\n      type: 'tag',\n      name: 'tech'\n    })\n\n  const tag2 = gun\n    .get('tag::tag2')\n    .put({\n      type: 'tag',\n      name: 'Kanye West'\n    })\n\n  const tag3 = gun\n    .get('tag::tag3')\n    .put({\n      type: 'tag',\n      name: 'Bitcoin'\n    })\n\n  tags.set(tag1)\n  tags.set(tag2)\n  tags.set(tag3)\n\n  // Create web tags\n\n  const webTags = gun\n  .get('set::webTags')\n  // .put({\n  //   type: 'set'\n  // })\n\n  const wt1 = gun\n    .get('webTag::wt1')\n    .put({\n      type: 'webTag',\n      domain: 'google.com',\n      url: 'google.com/test'\n    })\n\n  const wt2 = gun\n    .get('webTag::wt2')\n    .put({\n      type: 'webTag',\n      domain: 'wikipedia.com',\n      url: 'wikipedia.com/test'\n    })\n\n    const wt3 = gun\n    .get('webTag::wt3')\n    .put({\n      type: 'webTag',\n      domain: 'twitter.com',\n      url: 'twitter.com/test'\n    })\n\n  webTags.set(wt1)\n  webTags.set(wt2)\n  webTags.set(wt3)\n\n\n  // Create cards\n\n  const cards = gun\n    .get('set::cards')\n    // .put({\n    //   type: 'set',\n    // })\n\n  const c1 = gun\n    .get('card::c1')\n    .put({\n      type: 'card',\n      frontText: 'What is the most important advice Peter Thiel would give to young people?',\n      backText: 'Competition is for losers',\n      due: 1597552354538\n    })\n\n  c1.get('tags').set(tag1)\n  c1.get('webTags').set(wt1)\n\n  const c2 = gun\n    .get('card::c2')\n    .put({\n      type: 'card',\n      frontText: 'How much Bitcoin does Kanye West have?',\n      backText: '100 Bitcoin',\n      due: 1597812957903\n    })\n\n  c2.get('tags').set(tag2)\n  c2.get('webTags').set(wt2)\n\n  cards.set(c1)\n  cards.set(c2)\n\n\n  //Put everything together\n\n  const all = gun.get('all')\n    // .put({type: 'root'})\n  all.get('tags').put(tags)\n  all.get('webTags').put(webTags)\n  all.get('cards').put(cards)\n}\n\nexport default createTestData","import Gun from 'gun/gun'\nimport createTestData from './createTestData'\n\nasync function createGun(useTestData) {\n  // const gun = Gun(['http://localhost:8765/gun'])\n  const gun = Gun()\n  // const gun = Gun({\n  //   peers: {'http://localhost:8765/gun': {}},\n  //   localStorage: true\n  // })\n\n  if (useTestData) {\n    localStorage.clear()\n    await createTestData(gun)\n  }\n\n  return gun\n}\n\nexport default createGun\n\n","import React from 'react';\n\nconst GunContext = React.createContext()\n\nfunction GunProvider({ value, ...rest }) {\n  return <GunContext.Provider value={value} {...rest} />\n}\n\nexport {\n  GunContext,\n  GunProvider\n}","import { useContext } from 'react';\nimport { GunContext } from '../context'\n\nexport default function useGun() {\n  const context = useContext(GunContext)\n  if (context === undefined) {\n    throw new Error('useGun must be used within a provider')\n  }\n  return context\n}","import { useEffect, useState } from 'react'\nimport useGun from './useGun'\nimport cloneDeep from 'lodash/cloneDeep'\nimport reduce from 'lodash/reduce'\nimport transform from 'lodash/transform'\nimport isObject from 'lodash/isObject'\nimport gunEventListenerWrapper from '../utils/gunEventListenerWrapper'\n\n\nfunction convertGunQueryToObj(gunQuery, args){\n  return JSON.parse(\n    gunQuery\n      .replace(/\\s/g,'') //remove whitespace\n      .replace(/(\\$[^\",{}[\\]]+)/g, (m) => args[m.slice(1)][0]) //insert args\n      .replace(/\\[([^{}[\\]]+)\\]/g, '$1__set') //tag sets\n      .replace(/(?<=,|{)([^,{}[\\]]+)(?={)/g, '\"$1\":') //convert to json syntax\n      .replace(/(?<=,|{)([^\",{}[\\]]+)/g, '\"$1\": null') //set fields to null\n  )\n}\n\nfunction syncField(gun, id, key, syncObj, updateState) {\n  const sync = (v) => {\n    syncObj[key] = v\n    // console.log(key, v, syncObj)\n    updateState()\n  }\n  const [wrappedListener, unsubscriber] = gunEventListenerWrapper(sync)\n  gun.get(id).get(key).on(wrappedListener)\n  return unsubscriber\n}\n\nfunction syncSet(gun, id, key, syncObj, updateState, unsubscribers) {\n  \n  const trimmedKey = key.slice(0, -5)\n  const nodeKeys = syncObj[key]\n  delete syncObj[key]\n\n  const childSyncObj = {}\n  syncObj[trimmedKey] = childSyncObj\n\n  var event\n  unsubscribers.push(() => {\n    if (event) {\n      event.off()\n    }\n  })\n  \n  gun.get(id).get(trimmedKey).map().once((node, _key, _msg, eve) => {\n    const nodeId = node._ && node._['#']\n    if (!nodeId) {\n      return\n    }\n\n    if (!event) {\n      event = eve\n    }\n    const nodeSyncObj = cloneDeep(nodeKeys)\n    childSyncObj[nodeId] = nodeSyncObj\n    \n    subscribeSyncObjectHelper(gun, nodeId, nodeSyncObj, updateState, unsubscribers)\n  })\n}\n\nfunction subscribeSyncObjectHelper(gun, id, syncObj, updateState, unsubscribers) {\n  Object.keys(syncObj).forEach((k) => {\n    const v = syncObj[k]\n    if (v === null) {\n      // console.log(syncObj, v, k, id)\n      unsubscribers.push(\n        syncField(gun, id, k, syncObj, updateState)\n      )\n    } else if (typeof v === 'object') {\n      if (k.includes('__set')) {\n        syncSet(gun, id, k, syncObj, updateState, unsubscribers)\n      } else {\n        //I use on() rather than once() to get id\n        gun.get(id).get(k).on((node, _k, _msg, event) => {\n          event.off()\n          subscribeSyncObjectHelper(gun, node._['#'], syncObj[k], updateState, unsubscribers)\n        })\n      }\n    }\n  })\n}\n\n//Todo when a node is deleted, subscriptions to its children are not, which might cause unexpected behavior\nfunction subscribeSyncObject(gun, syncObj, setState) {\n  function updateState() {\n    // console.log(syncObj)\n    setState(cloneDeep(syncObj))\n  }\n  const unsubscribers = []\n  Object.keys(syncObj).forEach((id) => {\n    subscribeSyncObjectHelper(gun, id, syncObj[id], updateState, unsubscribers)\n  })\n  return unsubscribers\n}\n\nfunction replaceKeysDeep(obj, keysMap) {\n  return transform(obj, function(result, value, key) {\n  \n    var currentKey = keysMap[key] || key\n  \n    result[currentKey] = isObject(value) ? replaceKeysDeep(value, keysMap) : value\n  })\n}\n\nfunction renameKeys(state, args) {\n  const keysMap = reduce(args, function(result, value, key) {\n    result[value[0]] = value[1]\n    return result;\n  }, {});\n  \n  return replaceKeysDeep(state, keysMap)\n}\n\n//TODO should handle once or on cases\n//TODO should have function to get soul and add soul to syncobj\n//TODO should return isloading\n//TODO should be able to specify names of keys in the return value in the gunQuery\n//NOTE: the args should be a tuple with the arg value and what it should be called in the object that is returned\nexport default function useGunState(gunQuery, args) {\n  const [state, setState] = useState()\n  const gun = useGun()\n\n  useEffect(() => {\n    // console.log('useEffect')\n    if (gunQuery) {\n      const syncObj = convertGunQueryToObj(gunQuery, args)\n      const unsubscribers = subscribeSyncObject(gun, syncObj, setState)\n      return () => {\n        unsubscribers.forEach((u) => {u()})\n      }\n    }\n    return undefined\n  }, [gunQuery, ...Object.values(args).map((v) => v[0])])\n\n  return renameKeys(state, args)\n}\n\n\n//queryfunc is responsible for subscribing to gun events using setState.\n//It should also return a function that removes subscriptions.\n// export default function useGunState(queryFunc, dependencies=[], syncObj={}) {\n//   const [state, setState] = useState({})\n//   const gun = useGun()\n\n//   useEffect(() => {\n//     return queryFunc(gun, syncObj, setState)\n//   }, dependencies)\n\n//   return state\n// }","export default function gunEventListenerWrapper(eventListener) {\n  var events = []\n  function wrappedEventListener(value, key, msg, event) {\n    events.push(event)\n    eventListener(value, key, msg, event)\n  }\n  function unsubscribe() {\n    if (events.length == 0) {\n      throw 'unsubscribe failed'\n    } else {\n     events.forEach((e) => {e.off()}) \n    }\n  }\n  return [wrappedEventListener, unsubscribe]\n}","import React from 'react';\nimport useGunState from '../hooks/useGunState';\nimport ListGroup from 'react-bootstrap/ListGroup'\n\nexport default function SidebarWrapper(props){\n\n  const gunQuery = `{\n    all {\n      [tags] {\n        name\n      },\n      [webTags] {\n        domain,\n        url\n      }\n    }\n  }`\n  const state = useGunState(gunQuery, {})\n  \n  const tags = (state && state.all && state.all.tags)\n    ? Object.values(state.all.tags)\n    : []\n\n  const webTags = (state && state.all && state.all.webTags)\n    ? Object.values(state.all.webTags)\n    : []\n\n  return (\n    <div>\n      <h1>Flash</h1>\n      <br/>\n      <h2>Tags</h2>\n      <hr/>\n      <ListGroup>\n        {tags.map((tag, index) => (\n          <ListGroup.Item key={index} active={props.selectedTags[tag.name]} action onClick={() => {\n            props.setSelectedTags(Object.assign({...props.selectedTags}, {[tag.name]: !props.selectedTags[tag.name]})) \n          }}>\n            {tag.name}\n          </ListGroup.Item>\n        ))}\n      </ListGroup>\n      <br/>\n      <h2>Websites</h2>\n      <hr/>\n      <ListGroup>\n        {webTags.map((webTag, index) => (\n          <ListGroup.Item key={index} active={props.selectedTags[webTag.url]} action onClick={() => {\n            props.setSelectedTags(Object.assign({...props.selectedTags}, {[webTag.url]: !props.selectedTags[webTag.url]})) \n          }}>\n            {webTag.url}\n          </ListGroup.Item>\n        ))}\n      </ListGroup>\n    </div>\n  )\n}","import React from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport createGun from './gun'\nimport { GunProvider } from './context'\nimport Sidebar from \"./components/Sidebar\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport SplitPane from 'react-split-pane'\nimport Main from './components/Main'\n\nvar gun\n\nexport default function App(props) {\n  const [isLoadingComplete, setLoadingComplete] = React.useState(false);\n\n  React.useEffect(() => {\n    async function loadResourcesAndDataAsync() {\n      try {\n        gun = await createGun(true)\n        window.gun = gun\n        \n        setLoadingComplete(true);\n\n      } catch (e) {\n        console.log('loadResourcesAndDataAsync FAILED')\n        throw e\n      }\n    }\n\n    loadResourcesAndDataAsync();\n  }, []);\n\n  const [selectedTags, setSelectedTags] = React.useState({})\n\n  if (!isLoadingComplete) {\n      return null;\n  } else {\n    return (  \n        <GunProvider value={gun}>\n          <SplitPane split=\"vertical\" minSize={50} defaultSize={200} allowResize>\n            <Sidebar selectedTags={selectedTags} setSelectedTags={setSelectedTags}/>\n            <Main selectedTags={selectedTags}/>\n          </SplitPane>\n        </GunProvider>\n    );\n  }\n}","// From https://gist.github.com/jed/982883\nexport default function uuid(a) {\n  return a ? (a ^ Math.random() * (16 >> a / 4)).toString(16) : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, uuid);\n}","import React from 'react';\nimport useGunState from '../hooks/useGunState';\nimport ListGroup from 'react-bootstrap/ListGroup'\nimport Button from 'react-bootstrap/Button'\nimport Form from 'react-bootstrap/Form'\nimport useGun from '../hooks/useGun';\nimport sortBy from 'lodash/sortBy'\nimport uuid from '../utils/uuid-v4'\n\nexport default function Main(props){\n\n  const gunQuery = `{\n    all {\n      [cards] {\n        frontText,\n        backText,\n        due,\n        [tags] {\n          name\n        },\n        [webTags] {\n          url\n        }\n      }\n    }\n  }`\n  const state = useGunState(gunQuery, {})\n  const gun = useGun()\n\n  const filterTags = Object.entries(props.selectedTags).filter(([k, v]) => v).map(([k, v]) => k)\n\n  console.log(state, props.selectedTags)\n  \n  const cards = (state && state.all && state.all.cards)\n    ? sortBy(\n        Object.entries(state.all.cards).filter(([id, card]) => {\n          if (!card.due) {\n            return false\n          }\n          if (filterTags.length > 0) {\n            if (!card.tags || !card.webTags) {\n              return false\n            }\n            const allTags = Object.values(card.tags)\n              .map((t) => t.name)\n              .concat(\n                Object.values(card.webTags)\n                  .map((t) => t.url)\n              )\n            return filterTags.every(t => allTags.includes(t))\n          }\n          \n          return true\n        }),\n        [function(o) { return o[1].due}]\n      )\n    : []\n\n  // const [openCards, setOpenCards] = React.useState({})\n\n  function addDays(time, numDays) {\n    return time + numDays * 86400000\n  }\n\n  function delayDueDate(delayTime, due, cardId) {\n    return () => {\n      gun.get(cardId).put({due: addDays(due, delayTime)})\n    }\n  }\n\n  function createNewCard(frontText, backText, cardId=`card::${uuid}`) {\n    const newCard = gun.get(cardId).put({frontText, backText, due: Date.now()})\n    gun.get('all').get('cards').set(newCard)\n  }\n\n  const [formValues, setFormValues] = React.useState({})\n\n  return (\n    <div>\n      <h2>Cards</h2>\n      <hr/>\n      <Form onSubmit={(e) => {\n        e.preventDefault()\n        createNewCard(formValues.frontText, formValues.backText)\n      }}>\n        <Form.Group controlId=\"formFront\">\n          <Form.Label>Front</Form.Label>\n          <Form.Control type=\"text\" value={formValues.frontText} onChange={(e) => {setFormValues({...formValues, frontText: e.target.value})}}/>\n        </Form.Group>\n        <Form.Group controlId=\"formBack\">\n          <Form.Label>Back</Form.Label>\n          <Form.Control type=\"text\" value={formValues.backText} onChange={(e) => {setFormValues({...formValues, backText: e.target.value})}}/>\n        </Form.Group>\n        <Button variant=\"primary\" type=\"submit\">\n          Submit\n        </Button>\n      </Form>\n      <hr/>\n      <ListGroup>\n        {cards.map(([id, card], index) => (\n          \n          <ListGroup.Item key={index} style={card.due < Date.now() ? {borderColor: 'red', borderWidth: 2} : {}}>\n            <p>{`Front: ${card.frontText}`}</p>\n            <p>{`Back: ${card.backText}`}</p>\n            <p>{`Tags: ${card.tags && Object.values(card.tags).map((t) => t.name)}`}</p>\n            <p>{`Web Tags: ${card.webTags && Object.values(card.webTags).map((t) => t.url)}`}</p>\n            <ListGroup horizontal>\n              <ListGroup.Item action onClick={delayDueDate(1, card.due, id)}>1d</ListGroup.Item>\n              <ListGroup.Item action onClick={delayDueDate(5, card.due, id)}>5d</ListGroup.Item>\n              <ListGroup.Item action onClick={delayDueDate(10, card.due, id)}>10d</ListGroup.Item>\n              <ListGroup.Item action onClick={delayDueDate(100, card.due, id)}>100d</ListGroup.Item>\n            </ListGroup>\n          </ListGroup.Item>\n        ))}\n      </ListGroup>\n    </div>\n  )\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}